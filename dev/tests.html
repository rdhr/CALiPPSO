<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Examples · CALiPPSO</title><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="index.html">CALiPPSO</a></span></div><form class="docs-search" action="search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="index.html">Home</a></li><li><a class="tocitem" href="theory.html">Introduction: theory and few details</a></li><li><span class="tocitem">User Guide</span><ul><li><a class="tocitem" href="installation.html">Installation</a></li><li><a class="tocitem" href="basic_usage.html">Basic usage</a></li><li><a class="tocitem" href="mainfunction.html">How the main function works</a></li><li><a class="tocitem" href="changing_default.html">Changing the default behaviour</a></li></ul></li><li class="is-active"><a class="tocitem" href="tests.html">Examples</a><ul class="internal"><li><a class="tocitem" href="#Trying-CALiPPSO-in-different-dimensions"><span>Trying CALiPPSO in different dimensions</span></a></li><li><a class="tocitem" href="#Testing-different-solvers"><span>Testing different solvers</span></a></li><li><a class="tocitem" href="#Simple-example-of-Benchmark"><span>Simple example of Benchmark</span></a></li></ul></li><li><a class="tocitem" href="types.html"><code>Structs</code> of CALiPPSO</a></li><li><a class="tocitem" href="issues.html">Problem solving and possible issues</a></li><li><a class="tocitem" href="todos.html">To Do&#39;s</a></li><li><a class="tocitem" href="api.html">API Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href="tests.html">Examples</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="tests.html">Examples</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/rdhr/CALiPPSO.jl/blob/master/docs/src/tests.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Tests-and-examples-provided"><a class="docs-heading-anchor" href="#Tests-and-examples-provided">Tests and examples provided</a><a id="Tests-and-examples-provided-1"></a><a class="docs-heading-anchor-permalink" href="#Tests-and-examples-provided" title="Permalink"></a></h1><p>All the scripts referred here can be found in the <a href="https://github.com/rdhr/CALiPPSO.jl/tree/master/Examples"><code>Examples</code> folder</a> of the Github repo, or also in local <code>CALiPPSO</code> folder (located in the Julia&#39;s package directory, <em>e.g.</em> <code>.julia/packages</code> in Linux). However, maybe it&#39;s better to just download the scripts into a location you find more convenient. The instructions below assume that <em>you are executing julia inside the folder where the scripts are located</em>.</p><p>In any case, two of the scripts are designed to show how CALiPPSO works in different dimensions and also the influence of the <a href="theory.html#The-initial-conditions">initial condition</a>. A third one is designed to test the different solvers, but to run it you&#39;ll need to have all of them <a href="installation.html#Dependencies">already installed</a>. And a final one is just a simple script to exemplify how you can analyze the performance of <code>CALiPPSO.jl</code>.</p><h2 id="Trying-CALiPPSO-in-different-dimensions"><a class="docs-heading-anchor" href="#Trying-CALiPPSO-in-different-dimensions">Trying CALiPPSO in different dimensions</a><a id="Trying-CALiPPSO-in-different-dimensions-1"></a><a class="docs-heading-anchor-permalink" href="#Trying-CALiPPSO-in-different-dimensions" title="Permalink"></a></h2><p>These tests are designed to jam <strong>monodisperse</strong> packings in <span>$d=3, 4, 5$</span> dimensions to show that (i) CALiPPSO is a versatile algorithm; and, (ii) that <a href="api.html#CALiPPSO.produce_jammed_configuration!"><code>produce_jammed_configuration!</code></a> seamlessly works on different dimensions without tunning a bunch of parameters. Instead, the number of dimensions is simply inferred from the <em>fixed</em> size of the particles&#39; position array, implemented as an <a href="https://juliaarrays.github.io/StaticArrays.jl/stable/pages/api/#SVector"><code>SVector</code></a>.</p><p>In both cases, the default solver used is <code>GLPK</code>. But we have also included (and commented out) the necessary lines to run the tests using <code>Gurobi</code>. This latter solver is much faster and more precise, as mentioned before.</p><h3 id="Highly-compressed-initial-configuration"><a class="docs-heading-anchor" href="#Highly-compressed-initial-configuration">Highly compressed initial configuration</a><a id="Highly-compressed-initial-configuration-1"></a><a class="docs-heading-anchor-permalink" href="#Highly-compressed-initial-configuration" title="Permalink"></a></h3><p>First, the case where CALiPPSO works better is, naturally, when the initial condition is already close to its jamming point. (See the <a href="theory.html#Theory-behind-CALiPPSO">Theory behind CALiPPSO</a> for more details.) Thus, for these examples, configurations of <span>$N=1024$</span> particles have been compressed up to a pressure of <span>$p=10^5$</span> using the <a href="https://doi.org/10.1007/BF01025983">Lubachevsky–Stillinger algorithm</a> (see <a href="theory.html#The-initial-conditions">here</a> for few more details).</p><p>To run this example, simply type the following line from a terminal</p><pre><code class="nohighlight hljs">julia jamming-monodisperse-after-LS.jl</code></pre><p>or, from inside the Julia&#39;s REPL, Jupyter Notebook, etc,</p><pre><code class="language-julia hljs">include(&quot;jamming-monodisperse-after-LS.jl&quot;)</code></pre><p>Then, <code>produce_jammed_configuration!</code> will be used to jam the configurations described before, and some output will be printed in the screen, showing the progress of CALiPPSO, etc. (<a href="basic_usage.html#Understanding-the-output-printed-in-screen/IO">Here</a> you find more info about how to interpret such output.) For each <span>$d$</span>, once CALiPPSO converges, the program also prints the values of <span>$sqrt{\Gamma^\star}-1$</span> and <span>$max_{i,\mu} |\mathbf{s}_{i,\mu}^\star|$</span> obtained at each iteration, and some statistics of the times needed to solve the LOP instances. Furthermore <a href="api.html#CALiPPSO.network_of_contacts"><code>network_of_contacts</code></a> is also called on the <em>jammed packing</em> in every dimension. Thus, you can test that CALiPPSO works properly, not only reaching the jamming point, but also extracting the full network of contacts of the jammed configuration.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Note that to run this script you also need the files from where the initial condition is read. The relevant <code>dat</code> files are also contained in the <code>Examples</code> folder of the repo.</p></div></div><h3 id="Low-density-initial-configuration"><a class="docs-heading-anchor" href="#Low-density-initial-configuration">Low density initial configuration</a><a id="Low-density-initial-configuration-1"></a><a class="docs-heading-anchor-permalink" href="#Low-density-initial-configuration" title="Permalink"></a></h3><p>The second example in which we test our algorithm is very similar to the previous, but now using an initial condition with low density. More precisely, this case jams configurations of <span>$N=512$</span> particles, initialized with the particles placed at random, and with initial densities <span>$\varphi_0 = \{0.3, 0.15, 0.1\}$</span>, respectively for each dimension. Such initial conditions are produced using <code>generate_random_configuration</code>, which assigns uniformly random positions to the particles&#39; centers(avoiding overlaps, of course).</p><p>To run this example, simply type the following line from a terminal</p><pre><code class="nohighlight hljs">julia jamming-monodisperse-random-init_conf.jl </code></pre><p>or, from inside the Julia&#39;s REPL, Jupyter Notebook, etc,</p><pre><code class="language-julia hljs">include(&quot;jamming-monodisperse-random-init_conf.jl&quot;)</code></pre><p>The script works essentially as the previous one, also calling  <a href="api.html#CALiPPSO.network_of_contacts"><code>network_of_contacts</code></a> once a packing has been jammed. Note however that it takes much longer to finish because much more LP optimizations are needed, as expected. Besides, the seed for the Julia&#39;s random number generator is initialized at the beginning of the script, for reproducibility. But it is not strictly necessary for the program to run.</p><p>Consider that running this script and similar programs might produce errors. Therefore, we do <strong>not</strong> guarantee that CALiPPSO can be used without errors with these types of initial conditions. It will always be better to initialize our algorithm with a density close to <span>$\varphi_J$</span>. In fact, note the following</p><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>Given that the initial condition is very far from the jamming point (<em>i.e.</em> <span>$(\varphi_J - \varphi_0)/\varphi_J \sim \mathcal{O}(1)$</span>), the first instances of the jamming LOP might lead to very large displacements, or to particles being block by <span>$s_{bound}$</span> (<em>i.e.</em> the bound on <span>$|\mathbf{s}_{i,\mu}|$</span>). And even though overlaps are unlikely to occur (but are certainly possible in this scenario), the main issue we observed is that at some point the solvers fail to find any solution to the LOP. Moreover, some other types of issues might occur, specially in high dimensions.</p></div></div><h2 id="Testing-different-solvers"><a class="docs-heading-anchor" href="#Testing-different-solvers">Testing different solvers</a><a id="Testing-different-solvers-1"></a><a class="docs-heading-anchor-permalink" href="#Testing-different-solvers" title="Permalink"></a></h2><p>To show that it is easy to use CALiPPSO with different solvers we provide the script <code>testing-different-solvers.jl</code>. Here we test the <code>Gurobi</code>, <code>HiGHS</code>, <code>Clp</code>, <code>GLPK</code>, and <code>COSMO</code> solvers on a same configuration, namely the <span>$N=1024$</span>, highly compressed configuration in <span>$d=3$</span> (i.e. one of the ones used in <a href="tests.html#Highly-compressed-initial-configuration">a previous example</a>). Reading through this script should provide a good idea on how to choose and tune different solvers using keywords, as <a href="changing_default.html#changing_the_solver">described before</a>. For instance each solver&#39;s attributes and arguments are explicitly defined; so this script can be used as a rough guideline on how to set the appropriate parameters for a given solver.</p><p>!!! Note     Only the GLPK solver is installed alongside <code>CALiPPSO.jl</code>. Thus, <strong>before</strong> running this script, be sure to have installed all these solvers. As described <a href="installation.html#Dependencies">in this section</a>, all of them (except Gurobi) are straightforward to install. Only <code>Gurobi</code> requires having a license and a manual installation of the solver itself. But it&#39;s also rather easy. </p><p>Once you have all the solvers installed, you can run the script from a terminal in the following way</p><pre><code class="nohighlight hljs">julia testing-different-solvers.jl</code></pre><p>or, from inside the Julia&#39;s REPL, Jupyter Notebook, etc,</p><pre><code class="language-julia hljs">include(&quot;testing-different-solvers.jl&quot;)</code></pre><p>The main function, <a href="api.html#CALiPPSO.produce_jammed_configuration!"><code>produce_jammed_configuration!</code></a>, is first precompiled with each solver. Then, it is called with the initial <span>$d=3$</span> condition mentioned above, once for each solver, in the order: <code>Gurobi</code>, <code>HiGHS</code>, <code>Clp</code>, <code>GLPK</code>, and <code>COSMO</code>. For each of them, the program outputs some info of the CALiPPSO progress, since <code>verbose=true</code>.</p><p>When a packing has been created with all the solvers, some information about how different they are is provided. More precisely, they are compared by computing the difference in radii and the mean squared distance between the particles&#39; positions, using the packing jammed with <code>Gurobi</code> as reference.</p><p>Besides, once CALiPPSO converges with a given solver, the times required to solve each LOP instance with said solver are also printed out. Thus, it&#39;s easy to compare their performance.</p><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>The  pure-Julia optimizer, <code>Hypatia.jl</code> can also be added to the list of solvers to test (naturally, after installing it). However, we did not include it by default because in our tests we observed that it consumed about 8GB of memory, compared to less than 1GB using other solvers. Besides, it was a rather slow solver, so we did not included it to avoid waiting too long. However, as we already mentioned, it is likely that we did not choose correctly its parameters and better results can be obtained.</p></div></div><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Using the <code>COSMO.jl</code> solver we observed that the LOP instances are solved with a much smaller accuracy, usually leading to non-isostatic packings. In fact, in our experience <code>produce_jammed_configuration!</code> rarely converges when using <code>COSMO</code> as solver (at least not for this system size). But once again, this might be caused by our poor choice of parameters for this solver.</p></div></div><h2 id="Simple-example-of-Benchmark"><a class="docs-heading-anchor" href="#Simple-example-of-Benchmark">Simple example of Benchmark</a><a id="Simple-example-of-Benchmark-1"></a><a class="docs-heading-anchor-permalink" href="#Simple-example-of-Benchmark" title="Permalink"></a></h2><p>In <code>benchmark-different-ds.jl</code> we provide a script to benchmark the performance of CALiPPSO using the same highly compressed initial conditions <a href="tests.html#Highly-compressed-initial-configuration">mentioned above</a>. In fact, both scripts are essentially the same, except that in this one a benchmark is performed, using the <code>@benchmarkable</code> (from the <a href="https://juliaci.github.io/BenchmarkTools.jl/dev/manual/"><code>Benchmarktools.jl</code></a> package) macro and by calling <a href="api.html#CALiPPSO.produce_jammed_configuration!"><code>produce_jammed_configuration!</code></a> on these configurations 20 different times (for each value of <span>$d$</span>), and setting <code>verbose=false</code> to avoid unnecessary, repeated output in screen. </p><div class="admonition is-info"><header class="admonition-header">Dependencies for this test</header><div class="admonition-body"><p>To run this test you also need to install <a href="https://github.com/JuliaCI/BenchmarkTools.jl"><code>Benchmarktools.jl</code></a> –in order to be able to call <code>@benchmarkable</code>–  and <a href="https://github.com/jump-dev/HiGHS.jl">HiGHS.jl</a>. We chose to use the latter solver so the 20 repetitions can be done much more rapidly than only using GLPK.</p><p>Naturally, if you don&#39;t want to install HiGHS and prefer the default behaviour of <code>produce_jammed_configuration!</code>, you can do so by calling this main function without specifying the <code>solver</code>, <code>solver_attributes</code>, and <code>solver_args</code> keywords.</p></div></div><p>Once you have all installed these dependencies, you can run the script from a terminal in the following way</p><pre><code class="nohighlight hljs">julia benchmark-different-ds.jl</code></pre><p>or, from inside the Julia&#39;s REPL, Jupyter Notebook, etc,</p><pre><code class="language-julia hljs">include(&quot;benchmark-different-ds.jl&quot;)</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="changing_default.html">« Changing the default behaviour</a><a class="docs-footer-nextpage" href="types.html"><code>Structs</code> of CALiPPSO »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.21 on <span class="colophon-date" title="Wednesday 20 July 2022 16:45">Wednesday 20 July 2022</span>. Using Julia version 1.7.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
